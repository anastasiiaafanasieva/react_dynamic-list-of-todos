{"version":3,"sources":["components/TodoList/TodoList.tsx","api/api.ts","components/CurrentUser/CurrentUser.tsx","App.tsx","index.tsx"],"names":["TodoList","todos","selectUser","selectedUserId","useState","initialTodos","setInitialTodos","status","setStatus","appliedQuery","setAppliedQuery","useEffect","applyQuery","useCallback","f","delay","timerId","clearTimeout","args","setTimeout","debounce","randomizer","array","newArr","i","length","j","Math","floor","random","randomize","filteredTodos","filter","todo","title","includes","completed","className","type","placeholder","onChange","event","target","value","name","input","selectStatus","onClick","map","classNames","readOnly","userId","id","getData","url","fetch","then","response","json","getTodos","a","data","getSelectedUser","CurrentUser","clearUser","user","setUser","email","phone","App","setSelectedUserId","setTodos","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7ae64fb9.chunk.js","sourcesContent":["import classNames from 'classnames';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport './TodoList.scss';\n\ntype Props = {\n  todos: Todo[];\n  selectUser: CallableFunction;\n  selectedUserId: number;\n};\n\ntype FuncArg = (v: string) => void;\n\nconst debounce = (f: FuncArg, delay: number) => {\n  let timerId: number;\n\n  return (...args: string[]) => {\n    clearTimeout(timerId);\n    timerId = setTimeout(f, delay, ...args);\n  };\n};\n\nexport const TodoList: React.FC<Props> = ({\n  todos,\n  selectUser,\n  selectedUserId,\n}) => {\n  const [initialTodos, setInitialTodos] = useState<Todo[]>([]);\n  const [status, setStatus] = useState<boolean | null>(null);\n  const [appliedQuery, setAppliedQuery] = useState('');\n\n  useEffect(() => {\n    setInitialTodos(todos);\n  }, [todos]);\n\n  const applyQuery = useCallback(\n    debounce(setAppliedQuery, 500),\n    [],\n  );\n\n  const selectStatus = (input: string) => {\n    switch (input) {\n      case 'all':\n        setStatus(null);\n        break;\n      case 'completed':\n        setStatus(true);\n        break;\n      case 'active':\n        setStatus(false);\n        break;\n      default:\n    }\n  };\n\n  const randomize = (array: Todo[]) => {\n    const newArr = [...array];\n\n    for (let i = newArr.length - 1; i > 0; i -= 1) {\n      const j = Math.floor(Math.random() * (i + 1));\n\n      [newArr[i], newArr[j]] = [newArr[j], newArr[i]];\n    }\n\n    return newArr;\n  };\n\n  const randomizer = () => {\n    setInitialTodos(randomize(initialTodos));\n  };\n\n  let filteredTodos = initialTodos\n    .filter(todo => todo.title.includes(appliedQuery));\n\n  if (status !== null) {\n    filteredTodos = filteredTodos.filter(todo => todo.completed === status);\n  }\n\n  return (\n    <div className=\"TodoList\">\n      <h2>Todos:</h2>\n\n      <div className=\"TodoList__filters\">\n        <label>\n          <input\n            data-cy=\"filterByTitle\"\n            className=\"TodoList__input input\"\n            type=\"text\"\n            placeholder=\"Filter by title\"\n            onChange={(event) => {\n              applyQuery(event.target.value);\n            }}\n          />\n        </label>\n\n        <label>\n          <select\n            name=\"select\"\n            className=\"TodoList__input select\"\n            onChange={(event) => selectStatus(event.target.value)}\n          >\n            <option value=\"all\">All</option>\n            <option value=\"active\">Active</option>\n            <option value=\"completed\">Completed</option>\n          </select>\n        </label>\n\n        <button\n          type=\"button\"\n          className=\"button TodoList__input\"\n          onClick={() => randomizer()}\n        >\n          Randomize\n        </button>\n      </div>\n\n      <div className=\"TodoList__list-container\">\n        <ul className=\"TodoList__list\" data-cy=\"listOfTodos\">\n          {filteredTodos.map(todo => (\n            <>\n              <li\n                className={classNames(\n                  'TodoList__item',\n                  { 'TodoList__item--unchecked': !todo.completed },\n                  { 'TodoList__item--checked': todo.completed },\n                )}\n                key={todo.id}\n              >\n                <label>\n                  <input type=\"checkbox\" readOnly />\n                  <p>{todo.title}</p>\n                </label>\n                {todo.userId\n                  && (\n                    <button\n                      data-cy=\"userButton\"\n                      className={classNames(\n                        'TodoList__user-button button',\n                        {\n                          'TodoList__user-button--selected button':\n                            todo.userId === selectedUserId,\n                        },\n                      )}\n                      type=\"button\"\n                      onClick={\n                        () => {\n                          selectUser(todo.userId);\n                        }\n                      }\n                    >\n                      {`User ${todo.userId}`}\n                    </button>\n                  )}\n              </li>\n            </>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n","const BASE_URL = 'https://mate.academy/students-api';\n\nconst getData = (url: string) => {\n  return fetch(`${BASE_URL}${url}`)\n    .then(response => response.json());\n};\n\nexport const getTodos = async () => {\n  const data = await getData('/todos');\n\n  return data;\n};\n\nexport const getSelectedUser = async (id: number) => {\n  try {\n    const data = await getData(`/users/${id}`);\n\n    return data;\n  } catch (error) {\n    return null;\n  }\n};\n","import React, { useState, useEffect } from 'react';\nimport { getSelectedUser } from '../../api/api';\nimport './CurrentUser.scss';\n\ntype Props = {\n  selectedUserId: number;\n  clearUser: CallableFunction,\n};\n\nexport const CurrentUser: React.FC<Props> = ({ selectedUserId, clearUser }) => {\n  const [user, setUser] = useState<User | null>(null);\n\n  useEffect(() => {\n    getSelectedUser(selectedUserId).then(data => setUser(data));\n  }, [selectedUserId]);\n\n  return (\n    <>\n      {user\n        ? (\n          <>\n            <div className=\"CurrentUser\">\n              <h2 className=\"CurrentUser__title\">\n                <span>{`Selected user: ${selectedUserId}`}</span>\n              </h2>\n\n              <h3\n                className=\"CurrentUser__name\"\n                data-cy=\"userName\"\n              >\n                {user?.name}\n              </h3>\n              <p className=\"CurrentUser__email\">{user?.email}</p>\n              <p className=\"CurrentUser__phone\">{user?.phone}</p>\n            </div>\n\n            <button\n              type=\"button\"\n              onClick={() => clearUser()}\n              className=\"CurrentUser__clear button\"\n            >\n              Clear\n            </button>\n          </>\n        )\n        : <h3>No user data</h3>}\n    </>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport './App.scss';\nimport './styles/general.scss';\nimport { TodoList } from './components/TodoList';\nimport { CurrentUser } from './components/CurrentUser';\nimport { getTodos } from './api/api';\n\nconst App: React.FC = () => {\n  const [\n    selectedUserId,\n    setSelectedUserId,\n  ] = useState(0);\n  const [todos, setTodos] = useState<Todo[]>([]);\n\n  useEffect(() => {\n    getTodos().then(data => setTodos(data));\n  }, []);\n\n  const selectUserId = (id: number) => {\n    setSelectedUserId(id);\n  };\n\n  const clearUser = () => {\n    setSelectedUserId(0);\n  };\n\n  return (\n    <div className=\"App\">\n      <div className=\"App__sidebar\">\n        <TodoList\n          todos={todos}\n          selectUser={selectUserId}\n          selectedUserId={selectedUserId}\n        />\n      </div>\n\n      <div className=\"App__content\">\n        <div className=\"App__content-container\">\n          {selectedUserId\n            ? (\n              <CurrentUser\n                selectedUserId={selectedUserId}\n                clearUser={clearUser}\n              />\n            )\n            : <h3>No user selected</h3>}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}